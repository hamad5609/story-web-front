(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a(129)},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=a(15),i=a(170),s=a(171),u=a(131),d=a(165),m=a(175),p=a(168),f=a(74),g=a.n(f),v=a(169),b=a(20),E=a(163),h=a(164),y=a(166),O=a(167),x=a(82),j=a.n(x),S=a(81),w=a.n(S),k=a(61),C=a.n(k),I=a(83),N=a.n(I),T=a(159),_=Object(T.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px 20px 0px"},title:{padding:"0 0 10px"},moreIcon:{color:"white"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"}}),P=a(79),A=a.n(P),D=a(12),L=a.n(D),F=a(22),W=a(80),U=a.n(W).a.create({baseURL:"https://story-web-back.herokuapp.com"});U.interceptors.request.use(function(e){return localStorage.getItem("UserProfile")&&(e.headers.authorization="Bearer ".concat(JSON.parse(localStorage.getItem("UserProfile")).token)),e});var R=function(e,t){return U.patch("/post/".concat(e),t)},H=function(e){return U.delete("/post/".concat(e))},z=function(e){return U.patch("/post/".concat(e,"/like"))},B=function(e){return U.post("/user/signin",e)},J=function(e){return U.post("/user/signup",e)},q=function(e){var t,a,n,l,c=e.post,o=(e.currentId,e.setCurrentId),i=_(),s=Object(b.b)(),m=JSON.parse(localStorage.getItem("UserProfile"));return r.a.createElement("div",null,r.a.createElement(E.a,{className:i.card},r.a.createElement(h.a,{className:i.media,image:c.selectedFile,title:c.title}),r.a.createElement("div",{className:i.overlay},r.a.createElement(u.a,{variant:"h6"},c.name),r.a.createElement(u.a,{variant:"body2"},A()(c.createdAt).fromNow())),r.a.createElement("div",{className:i.overlay2},(null===m||void 0===m?void 0:null===(t=m.result)||void 0===t?void 0:t.googleId)===c.creator||(null===m||void 0===m?void 0:null===(a=m.result)||void 0===a?void 0:a._id)===c.creator?r.a.createElement(d.a,{size:"small",className:i.moreIcon,onClick:function(){o(c._id)}},r.a.createElement(j.a,{size:"default"})):""),r.a.createElement("div",{className:i.details},r.a.createElement(u.a,{variant:"body2",color:"textSecondary"},c.tag.map(function(e){return"#".concat(e)}))),r.a.createElement(y.a,null,r.a.createElement(u.a,{className:i.title,gutterBottom:!0},c.title),r.a.createElement(u.a,{variant:"body2",color:"textSecondary",gutterBottom:!0},c.message)),r.a.createElement(O.a,{className:i.cardActions},r.a.createElement(d.a,{size:"small",color:"primary",disabled:!(null===m||void 0===m?void 0:m.result),onClick:function(){var e;s((e=c._id,function(){var t=Object(F.a)(L.a.mark(function t(a){var n,r;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z(e);case 3:n=t.sent,r=n.data,a({type:"LIKE_POST",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()))}},r.a.createElement(function(){if(c.likes.length>0){var e=c.likes.length;return c.likes.find(function(e){var t,a;return e===((null===m||void 0===m?void 0:null===(t=m.result)||void 0===t?void 0:t.googleId)||(null===m||void 0===m?void 0:null===(a=m.result)||void 0===a?void 0:a._id))})?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(w.a,{fontSize:"small"}),"\xa0",e>2?"you and ".concat(e-1," others"):"".concat(e," like").concat(e>1?"s":"")):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{fontSize:"small"}),"\xa0",e," ",e>1?"Likes":"Like"," ")}return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{fontSize:"small"}),"\xa0 Like")},null)),(null===m||void 0===m?void 0:null===(n=m.result)||void 0===n?void 0:n.googleId)===c.creator||(null===m||void 0===m?void 0:null===(l=m.result)||void 0===l?void 0:l._id)===c.creator?r.a.createElement(d.a,{size:"small",color:"secondary",onClick:function(){var e;s((e=c._id,function(){var t=Object(F.a)(L.a.mark(function t(a){return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H(e);case 3:a({type:"DELETE_POST",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()))}},r.a.createElement(N.a,null),"Delete"):"")))},G=function(e){var t=e.currentId,a=e.setCurrentId,n=Object(b.c)(function(e){return e.post});return n.length>0&&console.log(n),r.a.createElement("div",null,n&&n.length>0?r.a.createElement(p.a,{container:!0,spacing:3},n.map(function(e){return r.a.createElement(p.a,{item:!0,key:e._id,xs:12,sm:6},r.a.createElement(q,{post:e,currentId:t,setCurrentId:a}))})):r.a.createElement(v.a,null))},M=a(11),K=a(93),V=a(174),Q=Object(T.a)(function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}}),X=a(84),Y=a.n(X),Z=function(e){var t,a=e.currentId,l=e.setCurrentId,c=Q(),i=Object(b.b)(),s=Object(b.c)(function(e){return a?e.post.find(function(e){return e._id===a}):null}),m=JSON.parse(localStorage.getItem("UserProfile")),p=Object(n.useState)({title:"",message:"",tag:"",selectedFile:""}),f=Object(o.a)(p,2),g=f[0],v=f[1],E=function(){l(null),v({title:"",message:"",tag:"",selectedFile:""})};return Object(n.useEffect)(function(){s&&v(s)},[s]),(null===m||void 0===m?void 0:null===(t=m.result)||void 0===t?void 0:t.name)?r.a.createElement("div",null,r.a.createElement(K.a,null,r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(c.root," ").concat(c.form),onSubmit:function(e){var t,n,r,l;(e.preventDefault(),console.log(g),g&&""!==g.title&&""!==g.message&&""!==g.tag&&""!==g.selectedFile)&&(i(a?(r=a,l=Object(M.a)(Object(M.a)({},g),{},{name:null===m||void 0===m?void 0:null===(t=m.result)||void 0===t?void 0:t.name}),function(){var e=Object(F.a)(L.a.mark(function e(t){var a,n;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(r,l);case 3:a=e.sent,n=a.data,t({type:"SHOW_LOADER",payload:!0}),t({type:"UPDATE_POST",payload:n}),t({type:"SHOW_LOADER",payload:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),t({type:"SHOW_LOADER",payload:!0});case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(F.a)(L.a.mark(function t(a){var n,r;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l=e,U.post("/post",l);case 3:n=t.sent,r=n.data,a({type:"SHOW_LOADER",payload:!0}),a({type:"CREATE_POST",payload:r}),a({type:"SHOW_LOADER",payload:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message),a({type:"SHOW_LOADER",payload:!0});case 14:case"end":return t.stop()}var l},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()}(Object(M.a)(Object(M.a)({},g),{},{name:null===m||void 0===m?void 0:null===(n=m.result)||void 0===n?void 0:n.name}))),E())}},r.a.createElement(u.a,{variant:"h6"},"Create Story"),r.a.createElement(V.a,{name:"title",label:"Title",variant:"outlined",value:g.title,fullWidth:!0,required:!0,onChange:function(e){return v(Object(M.a)(Object(M.a)({},g),{},{title:e.target.value}))}}),r.a.createElement(V.a,{name:"message",label:"Message",variant:"outlined",fullWidth:!0,required:!0,value:g.message,onChange:function(e){return v(Object(M.a)(Object(M.a)({},g),{},{message:e.target.value}))}}),r.a.createElement(V.a,{name:"tag",label:"Tags",variant:"outlined",required:!0,fullWidth:!0,value:g.tag,onChange:function(e){return v(Object(M.a)(Object(M.a)({},g),{},{tag:e.target.value.split(",")}))}}),r.a.createElement("div",{className:c.fileInput},r.a.createElement(Y.a,{multiple:!1,type:"file",onDone:function(e){v(Object(M.a)(Object(M.a)({},g),{},{selectedFile:e.base64}))},value:g.selectedFile})),r.a.createElement(d.a,{className:c.buttonSubmit,variant:"contained",size:"large",color:"primary",fullWidth:!0,type:"submit"},"Submit"),r.a.createElement(d.a,{variant:"contained",size:"large",color:"secondary",fullWidth:!0,onClick:E},"Clear")))):r.a.createElement(K.a,null,r.a.createElement(u.a,{align:"center",variant:"h6"},"Please Sign in to create your story or like others story"))},$=Object(T.a)(function(){return{appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},formSection:{justifyContent:"space-between"},heading:{color:"rgba(0,183,255, 1)"},image:{marginLeft:"15px"}}}),ee=a(6),te=a(46),ae=a(85),ne=function(e){var t=Object(b.b)(),a=Object(ee.f)(),l=Object(ee.e)(),c=$(),f=Object(n.useState)(null),v=Object(o.a)(f,2),E=v[0],h=v[1],y=Object(n.useState)(null),O=Object(o.a)(y,2),x=O[0],j=O[1],S=function(){t({type:"LOGOUT"}),j(null),a("/")};return Object(n.useEffect)(function(){t(function(){var e=Object(F.a)(L.a.mark(function e(t){var a,n;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.get("/");case 3:a=e.sent,n=a.data,t({type:"SHOW_LOADER",payload:!0}),t({type:"Fetch_POST",payload:n}),t({type:"SHOW_LOADER",payload:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),t({type:"SHOW_LOADER",payload:!0});case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}())},[E,t]),Object(n.useEffect)(function(){var e=null===x||void 0===x?void 0:x.token;e&&1e3*Object(ae.a)(e).exp<(new Date).getTime()&&S(),j(JSON.parse(localStorage.getItem("UserProfile")))},[l]),r.a.createElement("div",null,r.a.createElement(i.a,{maxWidth:"lg"},r.a.createElement(s.a,{className:c.appBar,position:"static",color:"inherit"},r.a.createElement(u.a,{className:c.heading,variant:"h2",align:"center"},"Story"),r.a.createElement("img",{className:c.image,src:g.a,alt:"logo website",height:"60"}),x?r.a.createElement(d.a,{variant:"contained",color:"secondary",onClick:S},"Logout"):r.a.createElement(d.a,{variant:"contained",color:"primary",component:te.b,to:"/auth"},"Sign In")),r.a.createElement(m.a,{in:!0},r.a.createElement(i.a,null,r.a.createElement(p.a,{container:!0,spacing:3,className:c.formSection},r.a.createElement(p.a,{item:!0,sm:12,md:7},r.a.createElement(G,{currentId:E,setCurrentId:h})),r.a.createElement(p.a,{item:!0,sm:12,md:4},r.a.createElement(Z,{currentId:E,setCurrentId:h})))))))},re=a(58),le=a(176),ce=a(172),oe=a(173),ie=a(86),se=a.n(ie),ue=a(87),de=a.n(ue),me=function(e){var t=e.half,a=e.name,n=e.handleChange,l=e.type,c=e.label,o=e.autoFocus,i=e.handleShowPassword;return r.a.createElement(p.a,{item:!0,xs:12,sm:t?6:12},r.a.createElement(V.a,{name:a,onChange:n,type:l,variant:"outlined",label:c,autoFocus:o,required:!0,fullWidth:!0,InputProps:"password"===a?{endAdornment:r.a.createElement(ce.a,{position:"end"},r.a.createElement(oe.a,{onClick:i},"password"===l?r.a.createElement(se.a,null):r.a.createElement(de.a,null)))}:null}))},pe=Object(T.a)(function(){return{container:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},paper:{padding:"30px 20px"},form:{padding:"30px 0px 0px"},heading:{textAlign:"center"},btn:{marginTop:"20px"},icon:{margin:"auto",background:"#303f9f",marginBottom:"20px"},switchText:{marginTop:"20px",cursor:"pointer",transition:".3s","&:hover":{color:"#303f9f"}}}}),fe=a(89),ge=a.n(fe),ve=a(88),be={email:"",firstName:"",lastName:"",password:"",confirmPassword:""},Ee=function(e){var t=pe(),a=Object(ee.f)(),l=Object(b.b)(),c=Object(n.useState)(!1),s=Object(o.a)(c,2),m=s[0],f=s[1],g=Object(n.useState)(be),v=Object(o.a)(g,2),E=v[0],h=v[1],y=Object(n.useState)(!1),O=Object(o.a)(y,2),x=O[0],j=O[1],S=function(e){h(Object(M.a)(Object(M.a)({},E),{},Object(re.a)({},e.target.name,e.target.value)))},w=function(){var e=Object(F.a)(L.a.mark(function e(t){var n,r;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=null===t||void 0===t?void 0:t.profileObj,r=null===t||void 0===t?void 0:t.tokenId;try{l({type:"AUTH",data:{result:n,token:r}}),a("/")}catch(c){console.log(c)}case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(i.a,{className:t.container,maxWidth:"xs"},r.a.createElement(K.a,{className:t.paper},r.a.createElement(le.a,{className:t.icon},r.a.createElement(ge.a,null)),r.a.createElement(u.a,{variant:"h5",className:t.heading},m?"Sign Up":"Sign In"),r.a.createElement("form",{className:t.form,onSubmit:function(e){e.preventDefault(),l(m?function(e,t){return function(){var a=Object(F.a)(L.a.mark(function a(n){var r,l;return L.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,J(e);case 3:r=a.sent,l=r.data,n({type:"AUTH",data:l}),t("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0.message);case 12:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}()}(E,a):function(e,t){return function(){var a=Object(F.a)(L.a.mark(function a(n){var r,l;return L.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B(e);case 3:r=a.sent,l=r.data,n({type:"AUTH",data:l}),t("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0.message);case 12:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}()}(E,a))}},r.a.createElement(p.a,{container:!0,spacing:2},m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{name:"firstName",type:"text",label:"First Name",handleChange:S,autoFocus:!0,half:!0}),r.a.createElement(me,{name:"lastName",type:"text",label:"Last Name",handleChange:S,autoFocus:!0,half:!0})),r.a.createElement(me,{name:"email",type:"email",label:"Email",handleChange:S,autoFocus:!0}),r.a.createElement(me,{name:"password",type:x?"text":"password",label:"Password",handleChange:S,handleShowPassword:function(){return j(function(e){return!e})}}),m&&r.a.createElement(me,{name:"confirmPassword",type:"password",label:"Confirm Password",handleChange:S})),r.a.createElement(d.a,{type:"submit",fullWidth:!0,color:"primary",className:t.btn,variant:"contained"},m?"Sign Up":"Sign In"),r.a.createElement(ve.GoogleLogin,{clientId:"533608569605-nn5f2larv0rj77dj32gu5gnldqsmprsi.apps.googleusercontent.com",render:function(e){return r.a.createElement(d.a,{onClick:e.onClick,disabled:e.disabled,color:"primary",variant:"contained",fullWidth:!0,className:t.btn},"Google Sign in")},onSuccess:w,onFailure:function(){console.log("google login failed")}}),r.a.createElement(p.a,{container:!0},r.a.createElement(p.a,{item:!0},r.a.createElement(u.a,{color:"textSecondary",className:t.switchText,onClick:function(){return f(function(e){return!e})}},m?"Already have account want to sign in":"Not have an account"))))))};var he=function(){return r.a.createElement("div",null,r.a.createElement(te.a,null,r.a.createElement(ee.c,null,r.a.createElement(ee.a,{element:r.a.createElement(ne,null),exact:!0,path:"/"}),r.a.createElement(ee.a,{element:r.a.createElement(Ee,null),exact:!0,path:"/auth"}))))},ye=a(43),Oe=a(90),xe=a(91),je=Object(ye.b)({post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Fetch_POST":return t.payload;case"CREATE_POST":return[].concat(Object(xe.a)(e),[t.payload]);case"UPDATE_POST":case"LIKE_POST":return e.map(function(e){return e._id===t.payload._id?t.payload:e});case"DELETE_POST":return e.filter(function(e){return e._id!==t.payload});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("UserProfile",JSON.stringify(Object(M.a)({},null===t||void 0===t?void 0:t.data))),Object(M.a)(Object(M.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data});case"LOGOUT":return localStorage.clear(),Object(M.a)(Object(M.a)({},e),{},{authData:null});default:return e}}}),Se=Object(ye.d)(je,Object(ye.c)(Object(ye.a)(Oe.a)));c.a.render(r.a.createElement(b.a,{store:Se},r.a.createElement(he,null)),document.getElementById("root"))},74:function(e,t,a){e.exports=a.p+"static/media/logo.8db4e057.png"}},[[100,1,2]]]);
//# sourceMappingURL=main.789e56d5.chunk.js.map